# apphosting.yaml
# Settings for Cloud Run
runConfig:
  minInstances: 2
  maxInstances: 100
  concurrency: 100
  cpu: 2
  memoryMiB: 1024

# Environment variables and secrets
env:
  # Public environment variables accessible in both build and runtime
  - variable: NEXT_PUBLIC_LEMONSQUEEZY_API_KEY
    value: "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiI5NGQ1OWNlZi1kYmI4LTRlYTUtYjE3OC1kMjU0MGZjZDY5MTkiLCJqdGkiOiJiZDExYTI3NTM2MzQ5ZWYyYWJjYmYxZWY5MjkxMTVmNGM2OTZlNGMxY2FiN2UyYmY2MmVlMDI3MGQzNTY3OTk2MjRiNWY3NzIzNWM3YTk2MCIsImlhdCI6MTcxNzEzNTE5Mi4xNjM1ODUsIm5iZiI6MTcxNzEzNTE5Mi4xNjM1ODcsImV4cCI6MjAzMjY2Nzk5Mi4xMzYxMjgsInN1YiI6IjI0OTM3MjEiLCJzY29wZXMiOltdfQ.MeFdHdmm-Ks8j6rF0goF5N9MCEaeuxzXc1Fp7m6QNv0DSt603642Ph_v3kytGWZDfdQaiht_VagetuQsIOQDLM3vIvsmZy4IB1YNvFASOeRisHZhd5rmjtQ4If7mYGOGdtJf6aaqQCnPQrVMoLpaQHzJanWS5yv5FkXkoT6bpSGk1h4iNfRSX_vWkjFIRjXcfr2_T1lRMBeWzrMkMzApjBasu0V7svry3iLZfxU4KKwnehEmzABTgnIgq8YYNxSO_v46YjJ1oepcS43HJMDSPKPZ86e6fFmD-An28NsZn42Fb_AOYjIwFQhn0Fn_WXwAV18TkZuVRxy6FZfvjLxArSkEQxDcY9zbQfD5VitgGnqAPtHeQ3vS1I035ho8bfeUxqDJRhhFiiik4iDa6pC1kSHAqs4WXo0kJJO8uPT34SPQ6-jVcRPJAosRCrGmSBVhTpUvBoSHbt_W1guAj0rfb4k_3EyqbIgAJgDo74FdQl8UQMhtOEFJ0BX5hjArjhen"
    availability:
      - BUILD
      - RUNTIME

  - variable: NEXT_PUBLIC_LEMONSQUEEZY_STORE_ID
    value: "91950"
    availability:
      - BUILD
      - RUNTIME

  - variable: NEXT_PUBLIC_LEMONSQUEEZY_WEBHOOK_SIGNATURE
    value: "DSAJ23234AS4444@KP_ASD"
    availability:
      - BUILD
      - RUNTIME

  # Public Firebase environment variables
  - variable: NEXT_PUBLIC_FIREBASE_API_KEY
    value: "AIzaSyCWjCyuqutOGneHbnI8AqN2JactIc4IYlk"
    availability:
      - BUILD
      - RUNTIME

  - variable: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
    value: "buildcarousel-4e9ec.firebaseapp.com"
    availability:
      - BUILD
      - RUNTIME

  - variable: NEXT_PUBLIC_FIREBASE_PROJECT_ID
    value: "buildcarousel-4e9ec"
    availability:
      - BUILD
      - RUNTIME

  - variable: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
    value: "buildcarousel-4e9ec.appspot.com"
    availability:
      - BUILD
      - RUNTIME

  - variable: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
    value: "593782118274"
    availability:
      - BUILD
      - RUNTIME

  - variable: NEXT_PUBLIC_FIREBASE_APP_ID
    value: "1:593782118274:web:02118ed6bc853e1657a19b"
    availability:
      - BUILD
      - RUNTIME

  - variable: NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID
    value: "G-83KRBK20VG"
    availability:
      - BUILD
      - RUNTIME

  # Sensitive environment variables managed by Cloud Secret Manager
  - variable: FIREBASE_PRIVATE_KEY
    secret: firebasePrivateKey

  - variable: FIREBASE_CLIENT_EMAIL
    secret: firebaseClientEmail

  # Example of pinned secret version
  - variable: PINNED_API_KEY
    secret: myApiKeySecret@5

  # Example of verbose secret reference
  - variable: VERBOSE_API_KEY
    secret: projects/buildcarousel-4e9ec/secrets/myApiKeySecret

  # Example of verbose secret reference with pinned version
  - variable: PINNED_VERBOSE_API_KEY
    secret: projects/buildcarousel-4e9ec/secrets/myApiKeySecret/versions/5
